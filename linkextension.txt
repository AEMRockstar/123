                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       (function($) {
    "use strict";

    var _ = window._,
        Class = window.Class,
        CUI = window.CUI,
        REL_FIELD = "rel",
        METRICS_ID_FIELD = "metrics-id",
        PRIORITY_FIELD = "priority",
        ACTION_FIELD = "dataaction",
        RTE_LINK_DIALOG = "rtelinkdialog",
        PRIORITY_TEXT = "cmsTrack",
        DIRECTOR_LINK = "directorLink",
        WEBURL_LINK = "webURL_LINK";

    if (CUI.rte.ui.cui.CuiDialogHelper.extended) {
        return;
    }

    var ExtendLinkBaseDialog = new Class({
        extend: CUI.rte.ui.cui.CQLinkBaseDialog,

        toString: "ExtendLinkBaseDialog",

        initialize: function(config) {
            this.superClass.initialize.call(this, config);

            this.$rteDialog = this.$container.find("[data-rte-dialog=link]");
            /* 
             * To show resource picker path  not a mandatory field on coral pop-over initial load
             */
            $(".rte-dialog div.rte-dialog-column foundation-autocomplete").removeAttr("required");
            $(".rte-dialog div.rte-dialog-column foundation-autocomplete input").attr("aria-required","false").attr("aria-invalid","false"); 
            
            this.$rteDialog.find(".rte-dialog-columnContainer:first").before(getLinkRelOptionsHtml());
            this.$rteDialog.find(".rte-dialog-columnContainer:first").after(getDirectorLinkRelOptionsHtml());
            this.$rteDialog.find(".rte-dialog-columnContainer:last").before(getMetricsId());
            this.$rteDialog.find(".rte-dialog-columnContainer:last").before(getPriority());
		},
        /* Fires when the OK button is clicked on hyperlink modal dialog */
        dlgToModel: function() {
            this.superClass.dlgToModel.call(this);

            var metricsIdField = this.getFieldByType(METRICS_ID_FIELD);
            var priorityField = this.getFieldByType(PRIORITY_FIELD);

            if ((_.isEmpty(metricsIdField)) || (_.isEmpty(metricsIdField.val()))) {
                return;
            }

            var dataActionVal = metricsIdField.val();

            var priorityVal = priorityField[0].checked ? true : false;
            priorityField.on('change', function setPriorityValue(event) {
                priorityVal = event.currentTarget.checked ? true : false;
            });

            if (priorityVal) {
                dataActionVal += "." + PRIORITY_TEXT;
            }

            this.objToEdit.attributes[ACTION_FIELD] = dataActionVal;
			
			var linkSelection = $(".amica-rte-link-selection").find('input').attr('value');

            var hrefField = $('foundation-autocomplete[name=href]');
            var directorLinkField = this.getFieldByType(DIRECTOR_LINK);
            if (_.isEmpty(hrefField.val()) && _.isEmpty(directorLinkField.val())) {
                alert("Please enter either weburl or director link");
                return;
            }

            if (linkSelection === "Weburl" && hrefField) {
                var href = hrefField.val();
                if (href) {
                    this.objToEdit.href = href;
                }
            }

            if (linkSelection === "Director Link" && directorLinkField) {
                var directorLinkVal = directorLinkField.val();
                if (directorLinkVal) {
                    this.objToEdit.attributes["directorLink"] = directorLinkVal;
                    this.objToEdit.href = "javascript:Director.directRequest('" + directorLinkVal + "');";
                }
            }
        },



        /* Fires when the modal hyperlink dialog is opened */
        dlgFromModel: function() {
            this.superClass.dlgFromModel.call(this);           
           
            /* 
             * 1. Checks for the is href exists
             * 2.Switches  to Default Weburl selection if href not available
             * 3. Changes to Director Link if href has javascript:Director in it.
             */
            
	       if(typeof this.objToEdit.dom == "undefined") {
	    	    $('.amica-rte-link-selection').val('Weburl').trigger('change');
            	$(".rte-dialog div.rte-dialog-column input[name='metrics-id']").val('');
            	$(".rte-dialog div.rte-dialog-column input[name='priority']").prop('checked', false);

	                return;
	         }
            
	        var authored_link = this.objToEdit.dom.href;	        
            if(authored_link.indexOf('javascript:Director')>-1){
            	  var extract_link_module = authored_link.match(/\(\'(.*)\'\)/);
            	  
            	 $('.amica-rte-link-selection').val('Director Link').trigger('change');
                 $('.amica-rte-director-link').val(extract_link_module[1]).trigger('change');
            }else{
 	    	   $('.amica-rte-link-selection').val('Weburl').trigger('change');

            }
            	 
                       
            if (_.isEmpty(this.objToEdit.attributes)) {         	
                return;
            }
			
			var hrefField = $('foundation-autocomplete[name=href]');
            var directorLinkField = this.getFieldByType(DIRECTOR_LINK);
			var dataActionVal = this.objToEdit.attributes[ACTION_FIELD];

            var metricsIdVal = dataActionVal.split(".")[0];

            if (_.isEmpty(metricsIdVal)) {
                return;
            }

            var metricsId = this.$rteDialog.find("[data-type='metrics-id']")[0];
            metricsId.value = metricsIdVal;

            var priority = this.$rteDialog.find("[data-type='priority']")[0];

            if (dataActionVal.indexOf(PRIORITY_TEXT) >= 0) {
                priority.set("checked", true);
            } else {
                priority.set("checked", false);
            }

            var directorLinkValue = this.objToEdit.attributes['directorLink'];
            if (_.isEmpty(directorLinkValue)) {
                return;
            }

            var directorLinkSelect = this.$rteDialog.find("[data-type='directorLink']")[0];
            directorLinkSelect.items.getAll().forEach(function(elem) {
                elem.selected = (elem.value === directorLinkValue);
            });
        }
    });

    CUI.rte.ui.cui.CuiDialogHelper = new Class({
        extend: CUI.rte.ui.cui.CuiDialogHelper,

        toString: "CuiDialogHelper",

        instantiateDialog: function(dialogConfig) {
            var type = dialogConfig.type;

            if (type !== RTE_LINK_DIALOG) {
                this.superClass.instantiateDialog.call(this, dialogConfig);
                return;
            }

            var $editable = $(this.editorKernel.getEditContext().root),
                $container = CUI.rte.UIUtils.getUIContainer($editable),
                dialog = new ExtendLinkBaseDialog();

            dialog.attach(dialogConfig, $container, this.editorKernel);

            return dialog;
        }
    });

    function getLinkRelOptionsHtml() {
        var html = "<div class='rte-dialog-columnContainer'>" +
            "<div class='rte-dialog-column'>" +
            "<coral-select class='amica-rte-link-selection' data-type='rel' placeholder='Choose \"link\" value'>";

        var options = ["Weburl", "Director Link"];

        _.each(options, function(option) {
            html = html + getOptionHtml(option);
        });

        html = html + "</coral-select></div></div>";

        return html;

        function getOptionHtml(option) {
			if(option === "Weburl"){
				return "<coral-select-item selected>" + option + "</coral-select-item>";
			}else{
				return "<coral-select-item>" + option + "</coral-select-item>";
			}
        }
    }
	$(".amica-rte-director-link").find('input').attr('value')
    $(document).on('change', '.amica-rte-link-selection', function() {
        var value = "";
        if ($(this).find('input').length > 0 && $(this).find('input').attr('value')) {
            value = $(this).find('input').attr('value');
            if (value === "Weburl") {
                $(".amica-rte-director-link").parents(".rte-dialog-columnContainer").addClass("hide")
                $("foundation-autocomplete[name=href]").parents(".rte-dialog-columnContainer").removeClass("hide")
            } else if (value === "Director Link") {
                $(".amica-rte-director-link").parents(".rte-dialog-columnContainer").removeClass("hide")
                $("foundation-autocomplete[name=href]").parents(".rte-dialog-columnContainer").addClass("hide")
            }
        }
        $(".amica-rte-director-link");
        $("foundation-autocomplete[name=href]");
    });
   

    /* 
     * On change of Weburl to Director url, this logic makes the coral pop-over validations satisfied
     */
	 $(document).on('change', '.amica-rte-director-link', function() {
		 var value = "";
		 value = $(this).find('input').attr('value');
		 var coral_Tag_Markup = "<coral-tag class='coral-Tag coral-Tag--large' closable='' value='"+value+"' data-foundation-autocomplete-value-userdefined='' role='option' " +
		 	                 	"aria-selected='false' tabindex='0' aria-label='Remove #'><button is='coral-button' class='coral-Button coral-Button--minimal coral-Tag-removeButton' " +
		 	                 	"size='M' variant='minimal' handle='button' type='button' icon='close' iconsize='XS' title='Remove' tabindex='-1' coral-close='' aria-hidden='true'>" +
		 	                 	"<coral-icon class='coral-Icon coral-Icon--close coral-Icon--sizeXS' icon='close' size='XS' role='img' aria-label='close'>" +
		 	                 	"</coral-icon><coral-button-label></coral-button-label></button><coral-tag-label class='coral-Tag-label' aria-hidden='true'>"+value+"</coral-tag-label>" +
		 	                 	"<input handle='input' type='hidden' name='href' value='"+value+"'></coral-tag>";
		 
		
		 if($(".rte-dialog div.rte-dialog-column foundation-autocomplete coral-taglist .coral-Tag").length == 0){
			 $(".rte-dialog div.rte-dialog-column foundation-autocomplete coral-taglist").append(coral_Tag_Markup);
		 }else{
			 $(".rte-dialog div.rte-dialog-column foundation-autocomplete coral-taglist .coral-Tag").val("javascript:Director.directRequest('" + value + "');");	
		  }
		 
		 
	 });

    function getMetricsId() {
        var html = "<div class='rte-dialog-columnContainer'>" +
            "<div class='rte-dialog-column'>" +
            "<input is='coral-textfield' class='coral-Form-field roboxx' data-type='metrics-id' placeholder='Enter the MetricsId value' name='metrics-id'>";

        html = html + "</div></div>";

        return html;
    }

    function getPriority() {
        var html = "<div class='rte-dialog-columnContainer'>" +
            "<div class='rte-dialog-column'>" +
            "<coral-checkbox class='coral-Form-field' name='priority' data-type='priority'>Priority Link</coral-checkbox>";

        html = html + "</div></div>";

        return html;
    }

    function getDirectorLinkRelOptionsHtml() {

        var html = "<div class='rte-dialog-columnContainer hide'>" +
            "<div class='rte-dialog-column'>" +
            "<coral-select class='amica-rte-director-link' data-type='directorLink' placeholder='Choose \"director\" value'>";


        $.ajax({
            url: "/etc/acs-commons/lists/director_list/_jcr_content.list.json",
            dataType: 'json',
            async: false,
            success: function(data) {
                $.each(data, function(i, value) {
                    html = html + getOptionHtml(value);
                });
            }
        });

        html = html + "</coral-select></div></div>";

        return html;

        function getOptionHtml(option) {
            return "<coral-select-item value='" + option.value + "' >" + option.text + "</coral-select-item>"
        }

    }

    CUI.rte.ui.cui.CuiDialogHelper.extended = true;
})(jQuery);